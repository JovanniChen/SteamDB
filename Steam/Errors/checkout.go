package Errors

import "fmt"

// CheckoutError 自定义结账错误类型，包含错误码与错误消息
type CheckoutError struct {
	Code int
	Msg  string
}

func (e *CheckoutError) Error() string {
	return fmt.Sprintf("[%d]%s", e.Code, e.Msg)
}

// errorMessages 错误码到错误消息的映射表
var errorMessages = map[int]string{
	1:   "您的账单信息显示地址验证失败。请更正错误或联系客服部门寻求帮助。",
	2:   "您的账单信息显示资金不足。请更正错误或联系客服部门寻求帮助。",
	3:   "初始化您的交易时出现内部错误。请联系客服部门寻求帮助。",
	6:   "使用所选的支付方式进行购买时出现问题。请选择其他支付方式重新完成您的购买。",
	7:   "请检查购物车中是否存在商品。",
	8:   "由于您的帐户有另一个待定的交易，您的交易未能完成。",
	9:   "您的购买无法完成，因为您似乎已拥有您正尝试购买的其中一款游戏。请核对您的帐户和购物车。",
	13:  "由于您的购物车里存有在您的国家地区受限的物品，您的购买无法完成。",
	23:  "当前支付方式与商店的国家/地区不符。购物车已换算，新的合计金额将在下一页显示。",
	24:  "您的交易失败，因为要购买当前这款游戏，您必须先拥有另一款游戏。",
	31:  "您无法完成购买，您在 Steam 钱包中的货币与本次购买所使用的货币不相符。",
	33:  "由于您的信用卡已过期，您的购物未能完成。请输入一张新的信用卡重试。",
	35:  "您的购物未能完成。您为 Steam 钱包充值的金额已经超过余额最大值。",
	38:  "由于您所购买的物品中有缺货项目，因此您的订单无法完成。请稍后重试。",
	39:  "由于您的购物车中存在无法作为礼物的物品，因此您的购买未能完成。",
	40:  "由于您的购物车中存在美国锁区物品，因此您的购买未能完成。",
	44:  "您的购买未完成。您的帐户当前正被禁止购买。请联系 Steam 客服获取详情。",
	45:  "您最后在 Steam 上的购买仍待处理。在继续前请联系支付提供商，否则可能被重复扣款。",
	46:  "为保护帐户持有者，此次购买已被终止。请联系 Steam 客服解决此问题。",
	47:  "您正在尝试购买的物品已包含在您购物车中的某个物品包内，请检查是否重复购买。",
	52:  "由于您在购物车中有另一个待定交易，您的交易未能完成。",
	53:  "您在过去几个小时内尝试了多次购买，请稍后重试。",
	55:  "此卡号对于所选择的支付方式无效。",
	56:  "物品总数超出最大限制，请编辑购物车后重试。",
	57:  "您的购买无法完成，因为您已对相同物品订阅。请在帐户页面管理订阅详情。",
	59:  "您购买的物品中包含无法配送至您的收货地址的项目，因此订单无法完成。",
	69:  "由于您购物车中包含仅供商用的物品，因此您的订单无法完成。",
	70:  "您选择的接收该礼物的好友已拥有该产品。",
	71:  "您尝试购买的礼物未在接收人所在地区发行。",
	72:  "由于地区定价差异，该礼物无法发送到接收人的所在地区。",
	74:  "由于购物车中包含不允许用于商用帐户的物品，因此订单无法完成。",
	75:  "您当前所在国家/地区与您的企业注册国家/地区不符。",
	78:  "您输入的帐单地址过长。请简化或分为两行填写。",
	79:  "您的信用卡号无效。请检查后重试。",
	81:  "账单名称为空或包含过多数字，因此无效。",
	82:  "该支付方式目前不可用，请选择其他支付方式。",
	83:  "您正在购买的产品不支持所选支付方式。",
	84:  "购物车中包含需要加入等待名单的不再可用的物品，因此订单无法完成。",
	87:  "您购物车中包含已购买但从账户中移除的内容，请联系客服重新启用访问权限。",
	96:  "您每 3 个月更新一次 Steam 帐户所属国家/地区的次数受限，请使用当前地区支付方式。",
	97:  "在您的区域进行商业用途的购买需要增值税 ID，请在 Steamworks 更新公司信息。",
	98:  "由于您输入的收货地址无法验证，交易失败。",
	99:  "您的订单无法完成，因为现在已无需订金即可购买此物品。",
	100: "您的订单无法完成，因为购物车中包含无法购买的物品。",
}

// GetCheckoutError 根据错误代码返回对应的 CheckoutError
func GetCheckoutError(code int) error {
	if msg, ok := errorMessages[code]; ok {
		return &CheckoutError{Code: code, Msg: msg}
	}
	return &CheckoutError{Code: code, Msg: "未知的结账错误代码"}
}
